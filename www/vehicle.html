<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <title></title>
        <meta name="description" content="">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
        <meta http-equiv="cleartype" content="on">

        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/touch/apple-touch-icon-144x144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/touch/apple-touch-icon-114x114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/touch/apple-touch-icon-72x72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="img/touch/apple-touch-icon-57x57-precomposed.png">
        <link rel="shortcut icon" sizes="196x196" href="img/touch/touch-icon-196x196.png">
        <link rel="shortcut icon" href="img/touch/apple-touch-icon.png">

        <!-- Tile icon for Win8 (144x144 + tile color) -->
        <meta name="msapplication-TileImage" content="img/touch/apple-touch-icon-144x144-precomposed.png">
        <meta name="msapplication-TileColor" content="#222222">

        <!-- SEO: If mobile URL is different from desktop URL, add a canonical link to the desktop page -->
        <!--
        <link rel="canonical" href="http://www.example.com/" >
        -->

        <!-- Add to homescreen for Chrome on Android -->
        <!--
        <meta name="mobile-web-app-capable" content="yes">
        -->

        <!-- For iOS web apps. Delete if not needed. https://github.com/h5bp/mobile-boilerplate/issues/94 -->
        <!--
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-title" content="">
        -->

        <!-- This script prevents links from opening in Mobile Safari. https://gist.github.com/1042026 -->
        <!--
        <script>(function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){d=a.target;while(!f.test(d.nodeName))d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}})(document,window.navigator,"standalone")</script>
        -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/vendor/modernizr-2.7.1.min.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<style>
td {
    padding: 20px;
}
</style>
     <script>
        const EDMUNDS_API_KEY = '6gkv78s45kfx5cbgcf4mq5ae';
        function get_makes(year) {
            url = 'http://api.edmunds.com/v1/api/vehicle/makerepository/findmakesbymodelyear?year=' + year + '&api_key=' + EDMUNDS_API_KEY + '&fmt=json';
            $.ajax({
                type: "POST",
                url: url,
                data: '',
                dataType: 'jsonp',
                success: function(data) {
                    $('#makes').empty();
                    $('#makes').append("<option>Select Make</option>");
                    $.each(data.makeHolder, function(i, val) {
                        $('#makes').append("<option value='" + data.makeHolder[i].niceName + "'>" + data.makeHolder[i].name + "</option>");
                    });
                    $('#makes').removeAttr('disabled');
                    console.log('Step 2: Makes select was populated and enabled');
                }
            });
        }
        function get_models(make, year) {
            url = 'http://api.edmunds.com/v1/api/vehicle/modelrepository/findmodelsbymakeandyear?make=' + make + '&year=' + year + '&api_key=' + EDMUNDS_API_KEY + '&fmt=json';
            $.ajax({
                type: "POST",
                url: url,
                data: '',
                dataType: 'jsonp',
                success: function(data) {
                    $('#models').empty();
                    $('#models').append("<option>Select Model</option>");
                    $.each(data.modelHolder, function(i, val) {
                        $('#models').append("<option value='" + data.modelHolder[i].niceName + "'>" + data.modelHolder[i].name + "</option>");
                    });
                    $('#models').removeAttr('disabled');
                    console.log('Step 4: Models select was populated and enabled');
                }
            });
        }
        function get_styles(make, model, year) {
            url = 'http://api.edmunds.com/v1/api/vehicle/stylerepository/findstylesbymakemodelyear?make=' + make + '&model=' + model + '&year=' + year + '&api_key=' + EDMUNDS_API_KEY + '&fmt=json';
            $.ajax({
                type: "POST",
                timeout: 20000,
                url: url,
                data: '',
                dataType: 'jsonp',
                success: function(data) {
                    $('#styles').empty();
                    $('#styles').append("<option>Select Trim</option>");
                    $.each(data.styleHolder, function(i, val) {
                        console.log(data.styleHolder[i]);
                        $('#styles').append("<option value='" + data.styleHolder[i].id + "'>" + data.styleHolder[i].name + "</option>");
                    });
                    $('#styles').removeAttr('disabled');
                    console.log('Step 6: Styles(trim) select was populated and enabled');
                }
            });
        }
        function get_style_details(style_id) {
            url = 'http://api.edmunds.com/v1/api/vehicle/stylerepository/findbyid?id=' + style_id + '&api_key=' + EDMUNDS_API_KEY + '&fmt=json';
            $.ajax({
                type: "POST",
                url: url,
                data: '',
                dataType: 'jsonp',
                success: function(data) {
                    $('#details').html(JSON.stringify(data.styleHolder[0]));
                    console.log('Step 8: Collecting Style/trim data');
                }
            });
        }
        $(document).ready(function() {   
            $('#years').change(function() {
                console.log('Step 1: Year ' + $(this).val() + ' was selected');
                get_makes($(this).val());
            });
            
            $('#makes').change(function() {
                console.log('Step 3: Make ' + $(this).val() + ' was selected');
                get_models($(this).val(), $('#years').val());
            });
            $('#models').change(function() {
                console.log('Step 5: Model ' + $(this).val() + ' was selected');
                get_styles($('#makes').val(), $(this).val(), $('#years').val());
            });
            $('#styles').change(function() {
                console.log('Step 7: Style ' + $(this).val() + ' was selected');
                get_style_details($(this).val());
            });
        });
    </script>    
    </head>

    <body>

		<center>
		<h1 style="background-color:red; color:white;">TextMate</h1>
		</center>

		<div style="padding: 2px 4px 3px 4px;">
		<form id="testForm" action="insert2.php" method="post" enctype="multipart/form-data">

<!-- 
Make:<br>
<input type="text" name="make">
<br><br>
Model:<br>
<input type="text" name="model">
 -->
   <select id="years" name="years">
        <option>Select Year</option>
       <option>1990</option>
        <option>1991</option>
        <option>1992</option>
        <option>1993</option>
        <option>1994</option>
        <option>1995</option>
        <option>1996</option>
        <option>1997</option>
        <option>1998</option>
        <option>1999</option>
        <option>2000</option>
        <option>2001</option>
        <option>2002</option>
        <option>2003</option>
        <option>2004</option>
        <option>2005</option>
        <option>2007</option>
        <option>2008</option>
        <option>2009</option>
        <option>2010</option>
        <option>2011</option>
        <option>2012</option>
         <option>2013</option>
          <option>2014</option>
           <option>2015</option>
    </select><br><br>
    <select id="makes" name="makes" disabled="disabled">
        <option>Select Make</option>
    </select>
    <select id="models" name="models" disabled="disabled">
        <option>Select Model</option>
    </select>
<br><br>
Price<br>
<input type="text" name="price">
<br><br>
  Select image to upload:
    <input type="file" name="fileToUpload" id="fileToUpload">
    <!-- <input type="submit" value="Upload Image" name="submit"> --><br><br>
<input type="submit" value="Submit">
</form>
	<br>
	<center><table style="align:middle;border-spacing: 30px; border-collapse: separate;"><tr><td><a href="index.html"><img src="add.png" width="25px"></a><td><a href="contacts.html"><img src="contacts.png" width="25px"></a></td><td><a href="vehicle.html"><img src="addcar.gif" width="25px"></a></td><td><a href="vehicles.html"><img src="viewcar.png" width="25px"></a></td><td><a href="match.html"><img src="results.ico" width="25px"></a></td></tr></table></center><br>
</div>
        <!-- Add your site or application content here -->

        <script src="js/vendor/jquery-2.1.0.min.js"></script>
        <script src="js/helper.js"></script>
        <script src="js/main.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X');ga('send','pageview');
        </script>
    </body>
    <script>
   $("#testForm").submit(function(e)
{
   // var postData = $(this).serializeArray();
   var postData = new FormData($(this)[0]);
    var formURL = $(this).attr("action");
    $.ajax(
    {
        url : formURL,
        type: "POST",
        data : postData,
        async: false,
        success:function(data, textStatus, jqXHR) 
        {
            //data: return data from server
            alert('Vehicle Added');
        },
        cache: false,
        contentType: false,
        processData: false
        error: function(jqXHR, textStatus, errorThrown) 
        {
            //if fails  
             alert('Problem Adding Vehicle');    
        }
    });
    e.preventDefault(); //STOP default action
    e.unbind(); //unbind. to stop multiple form submit.
});
 
// $("#testForm").submit(); //Submit  the FORM
        </script>
</html>
